/*
 *  minute - a port of the "mini" IOS replacement for the Wii U.
 *
 *  Copyright (C) 2023          Max Thomas <mtinc2@gmail.com>
 *
 *  This code is licensed to you under the terms of the GNU GPL, version 2;
 *  see file COPYING or http://www.gnu.org/licenses/old-licenses/gpl-2.0.txt
 */

#include "gpu_init.h"

#include "gpu.h"

#define FB_TV_ADDR_IDK (0x14001000)
#define FB_TV_W (1280)
#define FB_TV_H (720)

gpu_init_entry_t gpu_init_entries_A[0x61] = {
    {0x438,  0,  1,  0},
    {0x440,  0,  1,  0},
    {0x468,  0,  6,  0},
    {0x46C,  0,  6,  0},
    {0x47C,  0,  0,  0},
    {0x480,  0,  0,  0},
    {0x484,  0, 0x10000000,  0},
    {0x498,  0,  0,  0},
    {0x4A0,  0, 0xC000000,  0},
    {0x4A4,  0,  0,  0},
    {0x4BC,  0,  0,  0},
    {0x4C0,  0,  0,  0},
    {0x4CC,  0, 0xC0C1101,  0},
    {0x4E8,  0, 0x70000,  0},
    {0x4F0,  0, 0x30000,  0},
    {0x558,  0, 0x70000,  0},
    {0x55C,  0, 0x30000,  0},
    {0x560,  0,  0,  0},
    {0x574,  0,  0,  0},
    {0x538,  0,  1,  0},
    {0x46C,  0,  6,  0},
    {0x5900,  1,  1,  0},
    {0x58E8, 0x10000000,  0,  0},
    {0x450,  0,  4, 0xF},
    {0x438,  0,  1, 0xF},
    {0x450,  0,  1,  0},
    {0x454,  0,  4, 0xF},
    {0x440,  0,  1, 0xF},
    {0x454,  0,  1,  0},
    {D1MODE_MASTER_UPDATE_LOCK,  0,  1,  0},
    {0x898,  0, 0x41,  0},
    {0x6528,  0,  0,  0},
    {D1GRPH_UPDATE,  0, 0x10000,  0},
    {D1OVL_UPDATE,  0, 0x10000,  0},
    {D1GRPH_CONTROL,  0, 0x100002,  0},
    {D1GRPH_SWAP_CNTL,  0,  0,  0},
    {D1GRPH_SECONDARY_SURFACE_ADDRESS,  0,  0,  0},

    {D1GRPH_PRIMARY_SURFACE_ADDRESS,  0, FB_TV_ADDR_IDK,  0},
    {D1GRPH_X_START,  0,  0,  0},
    {D1GRPH_Y_START,  0,  0,  0},
    {D1GRPH_X_END,  0, FB_TV_W,  0},
    {D1GRPH_Y_END,  0, FB_TV_H,  0},
    {D1GRPH_PITCH,  0, FB_TV_W,  0},
    {0x6580,  0,  0,  0},
    {0x6584,  0, (FB_TV_W << 16) | FB_TV_H,  0},
    
    {0x611C,  0,  0,  0},
    {0x6118,  0,  1,  0},
    {D1GRPH_ENABLE,  0,  0,  0},
    {D1OVL_ENABLE,  0,  0,  0},
    {DC_LUT_AUTOFILL,  1,  1,  0},
    {0x630C,  0,  2,  0},
    {0x6304,  0, 0xFF,  0},
    {0x6308,  0,  0,  0},
    {0x6380,  0,  0,  0},
    {0x6140,  0,  0,  0},
    {D1GRPH_ENABLE,  0,  1,  0},
    {D1GRPH_UPDATE,  0,  0,  0},
    {D1OVL_UPDATE,  0,  0,  0},
    {MCIF_CONTROL,  0, 0x10000000,  0},
    {0x6CAC,  0, 0x2020,  0},
    {0x6CA8,  0,  0,  0},
    {0x6520,  0, 0x20770000,  0},
    {0x6D58,  0, 0x30003,  0},
    {0x6CBC,  0, 0xD000D,  0},
    {0x65A4,  0, 0x10001,  0},
    {0x6594,  0, 0x101,  0},
    {0x65B0,  0, 0x10100,  0},
    {0x65C0,  0, 0x10100,  0},
    {0x6580,  0,  0,  0},
    {0x6584,  0, (FB_TV_W<<16)|FB_TV_H,  0},
    {0x6590,  0,  1,  0},
    {0x659C,  0,  0,  0},
    {0x60E8,  0,  1,  0},
    {0x6080,  0,  0,  0},
    {0x6000,  0, 0x897,  0},
    {0x6020,  0, 0x464,  0},
    {0x6004,  0, 0xC00840,  0},
    {0x6024,  0, 0x290461,  0},
    {0x6008,  0, 0x2C0000,  0},
    {0x6028,  0, 0x50000,  0},
    {0x6098,  0,  0,  0},
    {0x6094,  0, 0x401004,  0},
    {0x6088,  0,  0,  0},
    {0x6168,  0,  0,  0},
    {0x6080,  0, 0x10410311,  0},
    {0x480,  0,  0,  0},
    {0x60E8,  0,  0,  0},
    {0x6700,  0,  0,  0},
    {0x7080,  0,  0,  0},
    {0x7098,  0,  5,  0},
    {0x498,  0,  1,  0},
    {0x708C,  0,  3,  0},
    {0x7080,  0,  1,  0},
    {D1MODE_MASTER_UPDATE_LOCK,  0,  0,  0},
    {0x7E30, 0x10000000,  0,  0},
    {0x7E34, 0x10000000,  0,  0},
    {0x6098,  0,  0,  0}
};

gpu_init_entry_t gpu_init_entries_B[0x13B] = {
    {0x438,  0,  1,  0},
    {0x440,  0,  1,  0},
    {0x468,  0,  6,  0},
    {0x46C,  0,  6,  0},
    {0x47C,  0,  0,  0},
    {0x480,  0,  0,  0},
    {0x484,  0, 0x10000000,  0},
    {0x498,  0,  0,  0},
    {0x4A0,  0, 0xC000000,  0},
    {0x4A4,  0,  0,  0},
    {0x4BC,  0,  0,  0},
    {0x4C0,  0,  0,  0},
    {0x4CC,  0, 0xC0C1101,  0},
    {0x4E8,  0, 0x70000,  0},
    {0x4F0,  0, 0x30000,  0},
    {0x558,  0, 0x70000,  0},
    {0x55C,  0, 0x30000,  0},
    {0x560,  0,  0,  0},
    {0x574,  0,  0,  0},
    {0x538,  0,  1,  0},
    {0x46C,  0,  6,  0},
    {0x5900,  0,  1,  0},
    {0x58E8,  0, 0x5F01,  0},
    {0x450,  0,  4, 0xF},
    {0x438,  0,  1, 0xF},
    {0x450,  0,  1,  0},
    {0x454,  0,  4, 0xF},
    {0x440,  0,  1, 0xF},
    {0x454,  0,  1,  0},
    {D1MODE_MASTER_UPDATE_LOCK,  0,  1,  0},
    {0x898,  0, 0x41,  0},
    {0x6528,  0, 0x10000,  0},


    {D1GRPH_ENABLE,  0,  0,  0},
    {D1GRPH_UPDATE,  0, 0x10000,  0},
    {D1OVL_UPDATE,  0, 0x10000,  0},
    {0x6104,  0, 0x100002,  0},
    {0x610C,  0,  0,  0},
    {D1GRPH_SECONDARY_SURFACE_ADDRESS,  0,  0,  0},

    {D1GRPH_PRIMARY_SURFACE_ADDRESS,  0, FB_TV_ADDR_IDK,  0},
    {0x612C,  0,  0,  0},
    {0x6130,  0,  0,  0},
    {0x6134,  0, FB_TV_W,  0},
    {0x6138,  0, FB_TV_H,  0},
    {0x6120,  0, FB_TV_W,  0},
    {0x6124,  0,  0,  0},
    {0x6128,  0,  0,  0},
    {0x6580,  0,  0,  0},
    {0x6584,  0, (FB_TV_W<<16) | FB_TV_H,  0},
    {0x6588,  0, 0x150015,  0},
    {0x658C,  0, 0xE000E,  0},

    {0x611C,  0,  0,  0},
    {0x6118,  0,  1,  0},
    {D1OVL_ENABLE,  0,  0,  0},
    {DC_LUT_AUTOFILL,  0,  1,  0},
    {0x6300,  0,  0,  0},
    {0x630C,  0,  2,  0},
    {0x6304,  0, 0xFF,  0},
    {0x6308,  0,  0,  0},
    {0x6318,  0,  0,  0},
    {0x631C,  0,  0,  0},
    {0x6380,  0,  1,  0},
    {0x6140,  0,  1,  0},
    {0x6384,  0, 0x7020,  0},
    {0x6388,  0, 0x8000A220,  0},
    {0x638C,  0, 0x8000EDC0,  0},
    {0x6390,  0, 0x2000000,  0},
    {0x6394,  0, 0x4180,  0},
    {0x6398,  0, 0x80C0,  0},
    {0x639C,  0, 0x1900,  0},
    {0x63A0,  0, 0x86898000,  0},
    {0x63A4,  0, 0x8000DA20,  0},
    {0x63A8,  0, 0x8000B5C0,  0},
    {0x63AC,  0, 0x7020,  0},
    {0x63B0,  0, 0x2000000,  0},
    {D1GRPH_ENABLE,  0,  1,  0},
    {D1GRPH_UPDATE,  0,  0,  0},
    {D1OVL_UPDATE,  0,  0,  0},

    {MCIF_CONTROL,  0, 0x10000000,  0},
    {0x6CAC,  0, 0x2020,  0},
    {0x6CA8,  0,  0,  0},
    {0x6520,  0, 0x20770000,  0},
    {0x6D58,  0, 0x30003,  0},
    {0x6CBC,  0, 0x15,  0},
    {0x65D8,  0,  1,  0},
    {0x65CC,  0, 0x10000,  0},
    {0x65A0,  0,  0,  0},
    {0x65A4,  0,  0,  0},
    {0x65A8,  0, 0x14000,  0},
    {0x65AC,  0, 0xE000,  0},
    {0x65B0,  0,  0,  0},
    {0x65B4,  0, 0x1E40480,  0},
    {0x65B8,  0, 0x57200,  0},
    {0x65BC,  0, 0x57200,  0},
    {0x65C0,  0, 0x10000000,  0},
    {0x65C4,  0, 0x197C9A0,  0},
    {0x65C8,  0, 0x44A00,  0},
    {0x65D4,  0,  0,  0},
    {0x65DC,  0, 0x44A00,  0},
    {0x613C,  0,  0,  0},
    {0x6578,  0,  0,  0},
    {0x65CC,  0, 0x10000,  0},
    {0x65A4,  0,  0,  0},
    {0x65A0,  0,  0,  0},
    {0x65B4,  0, 0x1E40480,  0},
    {0x65C4,  0, 0x197C9A0,  0},
    {0x65B8,  0, 0x57202,  0},
    {0x65BC,  0, 0x57202,  0},
    {0x65C8,  0, 0x44BE4,  0},
    {0x65DC,  0, 0x44BE4,  0},
    {0x613C,  0,  0,  0},
    {0x6598,  0,  0,  0},
    {0x6594,  0, 0x705,  0},
    {0x65B0,  0,  0,  0},
    {0x65C0,  0, 0x1000000,  0},
    {0x65D4,  0,  0,  0},
    {0x6578,  0,  0,  0},
    {0x657C,  0, 0x84108100,  0},
    {0x6578,  0,  1,  0},
    {0x657C,  0, 0x840085E0,  0},
    {0x6578,  0,  2,  0},
    {0x657C,  0, 0x80008110,  0},
    {0x6578,  0, 0x100,  0},
    {0x657C,  0, 0x83D880E0,  0},
    {0x6578,  0, 0x101,  0},
    {0x657C,  0, 0x844085E0,  0},
    {0x6578,  0, 0x102,  0},
    {0x657C,  0, 0x80008128,  0},
    {0x6578,  0, 0x200,  0},
    {0x657C,  0, 0x83A080C0,  0},
    {0x6578,  0, 0x201,  0},
    {0x657C,  0, 0x846085E0,  0},
    {0x6578,  0, 0x202,  0},
    {0x657C,  0, 0x80008160,  0},
    {0x6578,  0, 0x300,  0},
    {0x657C,  0, 0x837080A0,  0},
    {0x6578,  0, 0x301,  0},
    {0x657C,  0, 0x84A085E0,  0},
    {0x6578,  0, 0x302,  0},
    {0x657C,  0, 0x80088168,  0},
    {0x6578,  0, 0x400,  0},
    {0x657C,  0, 0x83388088,  0},
    {0x6578,  0, 0x401,  0},
    {0x657C,  0, 0x84C085C0,  0},
    {0x6578,  0, 0x402,  0},
    {0x657C,  0, 0x801081B0,  0},
    {0x6578,  0, 0x500,  0},
    {0x657C,  0, 0x83008070,  0},
    {0x6578,  0, 0x501,  0},
    {0x657C,  0, 0x84E085C0,  0},
    {0x6578,  0, 0x502,  0},
    {0x657C,  0, 0x801081E0,  0},
    {0x6578,  0, 0x600,  0},
    {0x657C,  0, 0x82D08058,  0},
    {0x6578,  0, 0x601,  0},
    {0x657C,  0, 0x852085A0,  0},
    {0x6578,  0, 0x602,  0},
    {0x657C,  0, 0x802081F8,  0},
    {0x6578,  0, 0x700,  0},
    {0x657C,  0, 0x82988048,  0},
    {0x6578,  0, 0x701,  0},
    {0x657C,  0, 0x85408580,  0},
    {0x6578,  0, 0x702,  0},
    {0x657C,  0, 0x80288238,  0},
    {0x6578,  0, 0x800,  0},
    {0x657C,  0, 0x82688038,  0},
    {0x6578,  0, 0x801,  0},
    {0x657C,  0, 0x85608560,  0},
    {0x6578,  0, 0x802,  0},
    {0x657C,  0, 0x80388268,  0},
    {0x6578,  0, 0x20000,  0},
    {0x657C,  0, 0x8000BF80,  0},
    {0x6578,  0, 0x20001,  0},
    {0x657C,  0, 0x87E08488,  0},
    {0x6578,  0, 0x20002,  0},
    {0x657C,  0, 0xBFF884A0,  0},
    {0x6578,  0, 0x20003,  0},
    {0x657C,  0, 0x8000BF80,  0},
    {0x6578,  0, 0x20100,  0},
    {0x657C,  0, 0xBFE0BF88,  0},
    {0x6578,  0, 0x20101,  0},
    {0x657C,  0, 0x87E08430,  0},
    {0x6578,  0, 0x20102,  0},
    {0x657C,  0, 0x803884E0,  0},
    {0x6578,  0, 0x20103,  0},
    {0x657C,  0, 0x8000BF70,  0},
    {0x6578,  0, 0x20200,  0},
    {0x657C,  0, 0xBFB8BF98,  0},
    {0x6578,  0, 0x20201,  0},
    {0x657C,  0, 0x87E083D8,  0},
    {0x6578,  0, 0x20202,  0},
    {0x657C,  0, 0x80508540,  0},
    {0x6578,  0, 0x20203,  0},
    {0x657C,  0, 0x8000BF68,  0},
    {0x6578,  0, 0x20300,  0},
    {0x657C,  0, 0xBFA0BFA0,  0},
    {0x6578,  0, 0x20301,  0},
    {0x657C,  0, 0x87C08380,  0},
    {0x6578,  0, 0x20302,  0},
    {0x657C,  0, 0x808885A0,  0},
    {0x6578,  0, 0x20303,  0},
    {0x657C,  0, 0xBFF8BF60,  0},
    {0x65E0,  0, 0x101,  0},
    {0x6578,  0, 0x20300,  0},
    {0x657C,  0, 0xBFA0BFA0,  0},
    {0x6578,  0, 0x20301,  0},
    {0x657C,  0, 0x87C08380,  0},
    {0x6578,  0, 0x20302,  0},
    {0x657C,  0, 0x808885A0,  0},
    {0x6578,  0, 0x20303,  0},
    {0x657C,  0, 0xBFF8BF60,  0},
    {0x65E0,  0, 0x101,  0},
    {0x6578,  0, 0x20300,  0},
    {0x657C,  0, 0xBFA0BFA0,  0},
    {0x6578,  0, 0x20301,  0},
    {0x657C,  0, 0x87C08380,  0},
    {0x6578,  0, 0x20302,  0},
    {0x657C,  0, 0x808885A0,  0},
    {0x6578,  0, 0x20303,  0},
    {0x657C,  0, 0xBFF8BF60,  0},
    {0x6578,  0, 0x20400,  0},
    {0x657C,  0, 0xBF88BFB0,  0},
    {0x6578,  0, 0x20401,  0},
    {0x657C,  0, 0x87A08328,  0},
    {0x6578,  0, 0x20402,  0},
    {0x657C,  0, 0x80D085E0,  0},
    {0x6578,  0, 0x20403,  0},
    {0x657C,  0, 0xBFF8BF58,  0},
    {0x6578,  0, 0x20500,  0},
    {0x657C,  0, 0xBF70BFC0,  0},
    {0x6578,  0, 0x20501,  0},
    {0x657C,  0, 0x878082D0,  0},
    {0x6578,  0, 0x20502,  0},
    {0x657C,  0, 0x80F88640,  0},
    {0x6578,  0, 0x20503,  0},
    {0x657C,  0, 0xBFF0BF58,  0},
    {0x6578,  0, 0x20600,  0},
    {0x657C,  0, 0xBF68BFC8,  0},
    {0x6578,  0, 0x20601,  0},
    {0x657C,  0, 0x87608278,  0},
    {0x6578,  0, 0x20602,  0},
    {0x657C,  0, 0x81388680,  0},
    {0x6578,  0, 0x20603,  0},
    {0x657C,  0, 0xBFE8BF58,  0},
    {0x6578,  0, 0x20700,  0},
    {0x657C,  0, 0xBF60BFD0,  0},
    {0x6578,  0, 0x20701,  0},
    {0x657C,  0, 0x87208228,  0},
    {0x6578,  0, 0x20702,  0},
    {0x657C,  0, 0x819086C0,  0},
    {0x6578,  0, 0x20703,  0},
    {0x657C,  0, 0xBFE8BF50,  0},
    {0x6578,  0, 0x20800,  0},
    {0x657C,  0, 0xBF58BFD8,  0},
    {0x6578,  0, 0x20801,  0},
    {0x657C,  0, 0x870081E0,  0},
    {0x6578,  0, 0x20802,  0},
    {0x657C,  0, 0x81E086E0,  0},
    {0x6578,  0, 0x20803,  0},
    {0x657C,  0, 0xBFD8BF58,  0},
    {0x659C,  0,  0,  0},
    {0x65D8,  0,  0,  0},
    {0x6590,  0,  1,  0},
    {0x65CC,  0,  0,  0},
    {0x65D8,  0,  0,  0},
    {0x65A0,  0,  0,  0},
    {0x65B0,  0, 0x10100,  0},
    {0x65C0,  0, 0x10100,  0},
    {0x6580,  0,  0,  0},
    {0x6584,  0, (FB_TV_W<<16) | FB_TV_H,  0},
    {0x6590,  0,  1,  0},
    {0x659C,  0,  0,  0},
    {0x658C,  0, 0xE000E,  0},
    {0x6588,  0, 0x150015,  0},
    {0x60E8,  0,  1,  0},
    {0x6080,  0,  0,  0},
    {0x6084,  0,  0,  0},
    {0x6088,  0,  0,  0},
    {0x6000,  0, 0x359,  0},
    {0x6F00,  0, 0x30000,  0},
    {0x6020,  0, 0x20C,  0},
    {0x6004,  0, 0x7A034A,  0},
    {0x6024,  0, 0x240204,  0},
    {0x6008,  0, 0x3E0000,  0},
    {0x6028,  0, 0x60000,  0},
    {0x6098,  0, 0x20010200,  0},
    {0x6094,  0, 0x20010200,  0},
    {0x6090,  0,  0,  0},
    {0x6088,  0,  0,  0},
    {0x6168,  0,  0,  0},
    {0x6080,  0, 0x10410311,  0},
    {0x480,  0,  0,  0},
    {0x60E8,  0,  0,  0},
    {0x6700,  0, 0x30000,  0},
    {0x6704,  0,  0,  0},
    {0x7080,  0,  0,  0},
    {0x7084, 0x10000000,  0,  0},
    {0x7088, 0x10000000,  0,  0},
    {0x708C,  0,  1,  0},
    {0x7090,  0, 0x20002,  0},
    {0x7094,  0,  0,  0},
    {0x709C,  0, 0x200FDC1,  0},
    {0x70A0,  0, 0x200FDC0,  0},
    {0x70B0,  0, 0x7CEFCEE,  0},
    {0x70C0,  0,  0,  0},
    {0x70C8,  0, 0x20002,  0},
    {0x70CC,  0,  1,  0},
    {0x70D0,  0, 0x20002,  0},
    {0x70D8,  0,  9,  0},
    {0x7098,  0, 0xB,  0},
    {0x498,  0,  1,  0},
    {0x708C,  0,  1,  0},
    {0x7080,  0, 0x101,  0},
    {D1MODE_MASTER_UPDATE_LOCK,  0,  0,  0},
    {0x7E30,  0,  0,  0},
    {0x7E34,  0,  0,  0}
};

gpu_init_entry_t gpu_init_entries_C[0x65] = {
    {0x438,  0,  1,  0},
    {0x440,  0,  1,  0},
    {0x468,  0,  6,  0},
    {0x46C,  0,  6,  0},
    {0x47C,  0,  0,  0},
    {0x480,  0,  0,  0},
    //{0x484,  0,  0x10000000,  0}, // diff: 0,  this one seems to mess up DRC
    {0x498,  0,  0,  0},
    {0x4A0,  0, 0x0C000000,  0},
    {0x4A4,  0,  0,  0},
    {0x4BC,  0,  0,  0},
    {0x4C0,  0,  0,  0},
    {0x4CC,  0, 0xC0C1101,  0},
    {0x4E8,  0, 0x70000,  0},
    {0x4F0,  0, 0x30000,  0},
    {0x558,  0, 0x70000,  0},

    {0x55C,  0, 0x30000,  0},
    {0x560,  0,  0,  0},
    {0x574,  0,  0,  0},
    {0x538,  0,  1,  0},
    {0x46C,  0,  6,  0},
    {0x5900,  1,  1,  0},
    {0x58E8, 0,  0x5f00,  0}, // 5f00  // {0x58E8, 0x10000000,  0,  0}, // 5f00
    {0x450,  0,  4, 0xF},
    {0x438,  0,  1, 0xF},
    {0x450,  0,  1,  0},
    {0x454,  0,  4, 0xF},
    {0x440,  0,  1, 0xF},
    {0x454,  0,  1,  0},

    {D1MODE_MASTER_UPDATE_LOCK,  0,  1,  0},
    {0x898,  0, 0x41,  0},
    {DC1_BASE + 0x528,  0,  0x10000,  0}, // 0->0x10000
    {D1GRPH_UPDATE,  0, 0x10000,  0},
    {D1OVL_UPDATE,  0, 0x10000,  0},
    {D1GRPH_CONTROL,  0, 0x100002,  0},
    {D1GRPH_SWAP_CNTL,  0,  0,  0}, // 0 -> 0x220
    {D1GRPH_PRIMARY_SURFACE_ADDRESS_HI,  0,  0,  0},
    {D1GRPH_PRIMARY_SURFACE_ADDRESS,  0, FB_TV_ADDR,  0},
    {D1GRPH_X_START,  0,  0,  0},
    {D1GRPH_Y_START,  0,  0,  0},
    {D1GRPH_X_END,  0, FB_TV_W,  0},
    {D1GRPH_Y_END,  0, FB_TV_H,  0},
    {D1GRPH_PITCH,  0, FB_TV_W,  0},
    {DC1_BASE + 0x124,  0,  0,  0},
    {DC1_BASE + 0x128,  0,  0,  0},
    {DC1_BASE + 0x580,  0,  0,  0},
    {DC1_BASE + 0x584,  0, (FB_TV_W << 16) | FB_TV_H,  0},
    //{DC1_BASE + 0x588,  0, 0x150015,  0}, // overscans
    //{DC1_BASE + 0x58C,  0, 0xE000E,  0},
    {DC1_BASE + 0x588,  0, 0,  0},
    {DC1_BASE + 0x58C,  0, 0,  0},
    {D1GRPH_SECONDARY_SURFACE_ADDRESS_HI,  0,  0,  0},
    {D1GRPH_SECONDARY_SURFACE_ADDRESS,  0,  1,  0},
    {D1GRPH_ENABLE,  0,  0,  0},
    {D1OVL_ENABLE,  0,  0,  0},
    {DC_LUT_AUTOFILL,  1,  1,  0}, // diff?
    {D1OVL_ALPHA_CONTROL,  0,  2,  0},
    {D1GRPH_ALPHA,  0, 0xFF,  0},
    {D1OVL_ALPHA,  0,  0,  0},
    {D1GRPH_COLOR_MATRIX_TRANSFORMATION_CNTL,  0,  0,  0},
    {D1OVL_COLOR_MATRIX_TRANSFORMATION_CNTL,  0,  0,  0},
    {D1GRPH_ENABLE,  0,  1,  0},
    {D1GRPH_UPDATE,  0,  0,  0},
    {D1OVL_UPDATE,  0,  0,  0},
    {MCIF_CONTROL,  0, 0x10000000,  0},
    {0x6CAC,  0, 0x2020,  0},
    {0x6CA8,  0,  0,  0},
    {DC1_BASE + 0x520,  0, 0x20770000,  0},
    {0x6D58,  0, 0x30003,  0},
    {0x6CBC,  0, 0xD000D,  0},
    {DC1_BASE + 0x5A4,  0, 0x10001,  0},
    {DC1_BASE + 0x594,  0, 0x101,  0},
    {DC1_BASE + 0x5B0,  0, 0x10100,  0},
    {DC1_BASE + 0x5C0,  0, 0x10100,  0},
    {DC1_BASE + 0x580,  0,  0,  0},
    {DC1_BASE + 0x584,  0, (FB_TV_W<<16)|FB_TV_H,  0},
    {DC1_BASE + 0x590,  0,  1,  0},
    {DC1_BASE + 0x59C,  0,  0,  0},
    {D1CRTC_UPDATE_LOCK,  0,  1,  0},
    {D1CRTC_CONTROL,  0,  0,  0},
    {D1CRTC_H_TOTAL,  0, 2199,  0},
    {D1CRTC_V_TOTAL,  0, 1124,  0},
    {D1CRTC_H_BLANK_START_END,  0, (0xC0<<16)|2112,  0},
    {D1CRTC_V_BLANK_START_END,  0, (0x29<<16)|1121,  0},
    {D1CRTC_H_SYNC_A,  0, 0x2C0000,  0},
    {D1CRTC_V_SYNC_A,  0, 0x50000,  0},
    {D1CRTC_BLACK_COLOR,  0,  0,  0},
    {D1CRTC_OVERSCAN_COLOR,  0, 0x401004,  0},
    {D1CRTC_INTERLACE_CONTROL,  0,  0,  0},
    {DC1_BASE + 0x168,  0,  0,  0},
    {D1CRTC_CONTROL,  0, 0x10410311,  0},
    {0x480,  0,  0,  0},
    {D1CRTC_UPDATE_LOCK,  0,  0,  0},
    {DC1_BASE + 0x700,  0,  0,  0},
    {0x7080,  0,  0,  0},
    {0x7098,  0,  5,  0},
    {0x498,  0,  1,  0},
    {0x708C,  0,  3,  0},
    {0x7080,  0,  1,  0},
    {D1MODE_MASTER_UPDATE_LOCK,  0,  0,  0},

    {0x7E30, 0x10000000,  0,  0},
    {0x7E34, 0x10000000,  0,  0},
    {D1CRTC_BLACK_COLOR,  0,  0,  0}
};

ave_init_entry_t ave_init_entries_A[0x25] = {
    {0x38, 0x07, 0xFF, 0x64},
    {0x38, 0x0B,  1,  0},
    {0x38, 0x20, 0x33,  0},
    {0x38, 0x21, 0x84,  0},
    {0x38, 0x05, 0x80,  0},
    {0x38, 0x40, 0x40,  0},

    // diff
    {0x38, 0x51,  1,  0},
    {0x38, 0x61, 0x90,  0},
    {0x38, 0x62, 0x10,  0},
    {0x38, 0xC2, 0x8A,  0},
    {0x38, 0xB2, 0x20,  0},
    {0x38, 0xB3,  0,  0},
    
    {0x39, 0x10, 0x82,  0},
    {0x39, 0x11,  2,  0},
    {0x39, 0x12, 0xD,  0},
    {0x39, 0x14, 0x10,  0},
    {0x39, 0x15, 0xA8,  0},
    {0x39, 0x16,  0,  0},
    {0x39, 0x17,  4,  0},
    {0x39, 0x50, 0x84,  0},
    {0x39, 0x51,  1,  0},
    {0x39, 0x52, 0xA,  0},
    {0x39, 0x54,  1,  0},
    {0x39, 0x55,  0,  0},
    {0x39, 0x56,  0,  0},
    {0x39, 0x57,  0,  0},
    {0x39, 0x58,  0,  0},
    {0x3F, 0x03, 0x10,  0},
    {0x38, 0x11, 0x97,  0},
    {0x38, 0xB1, 0xC4,  0},
    {0x39, 0x04, 0xF9,  0},
    {0x39, 0x03, 0x50,  0},
    {0x39, 0x02, 0x20,  0},
    {0x38, 0x20, 0x31,  0},
    {0x38, 0x0B,  0,  0},
    {0x38, 0x5F,  0,  0},
    {0x38, 0xB1, 0xC0,  0}
};

ave_init_entry_t ave_init_entries_B[0x26] = {
    {0x38, 0x07, 0xFF, 0x64},
    {0x38, 0x0B,  1,  0},
    {0x38, 0x20, 0x33,  0},
    {0x38, 0x21, 0x84,  0},
    {0x38, 0x05, 0x80,  0},
    {0x38, 0x40, 0x40,  0},

    // diff
    {0x38, 0x51, 0x80,  0},
    {0x38, 0x61, 0x82,  0},
    {0x38, 0x62,  2,  0},
    {0x38, 0xC2, 0xA,  0},
    {0x38, 0xB2, 0x20,  0},
    {0x38, 0xB3,  0,  0},
    {0x38, 0x4F, 0x18,  0},

    {0x39, 0x10, 0x82,  0},
    {0x39, 0x11,  2,  0},
    {0x39, 0x12, 0xD,  0},
    {0x39, 0x14, 0x10,  0},
    {0x39, 0x15, 0x58,  0}, // diff
    {0x39, 0x16,  0,  0},
    {0x39, 0x17,  2,  0}, // diff
    {0x39, 0x50, 0x84,  0},
    {0x39, 0x51,  1,  0},
    {0x39, 0x52, 0xA,  0},
    {0x39, 0x54,  1,  0},
    {0x39, 0x55,  0,  0},
    {0x39, 0x56,  0,  0},
    {0x39, 0x57,  0,  0},
    {0x39, 0x58,  0,  0},
    {0x3F, 0x03, 0x10,  0},
    {0x38, 0x11, 0x97,  0},
    {0x38, 0xB1, 0xC4,  0},
    {0x39, 0x04, 0xF9,  0},
    {0x39, 0x03, 0x50,  0},
    {0x39, 0x02, 0x20,  0},
    {0x38, 0x20, 0x31,  0},
    {0x38, 0x0B,  0,  0},
    {0x38, 0x5F,  0,  0},
    {0x38, 0xB1, 0xC0,  0}
};

ave_init_entry_t ave_init_entries_C[0x25] = {
    {0x38, 0x07, 0xFF, 0x64},
    {0x38, 0x0B,  1,  0},
    {0x38, 0x20, 0x33,  0},
    {0x38, 0x21, 0x84,  0},
    {0x38, 0x05, 0x80,  0},
    {0x38, 0x40, 0x40,  0},

    // diff
    {0x38, 0x51,  1,  0},
    {0x38, 0x61, 0x90,  0},
    {0x38, 0x62, 0x10,  0},
    {0x38, 0xC2, 0x8A,  0},
    {0x38, 0xB2, 0x20,  0},
    {0x38, 0xB3,  0,  0},
    
    {0x39, 0x10, 0x82,  0},
    {0x39, 0x11,  2,  0},
    {0x39, 0x12, 0xD,  0},
    {0x39, 0x14, 0x10,  0},
    {0x39, 0x15, 0xA8,  0},
    {0x39, 0x16,  0,  0},
    {0x39, 0x17,  4,  0},
    {0x39, 0x50, 0x84,  0},
    {0x39, 0x51,  1,  0},
    {0x39, 0x52, 0xA,  0},
    {0x39, 0x54,  1,  0},
    {0x39, 0x55,  0,  0},
    {0x39, 0x56,  0,  0},
    {0x39, 0x57,  0,  0},
    {0x39, 0x58,  0,  0},
    {0x3F, 0x03, 0x10,  0},
    {0x38, 0x11, 0x97,  0},
    {0x38, 0xB1, 0xC4,  0},
    {0x39, 0x04, 0xF9,  0},
    {0x39, 0x03, 0x50,  0},
    {0x39, 0x02, 0x20,  0},
    {0x38, 0x20, 0x31,  0},
    {0x38, 0x0B,  0,  0},
    {0x38, 0x5F,  0,  0},
    {0x38, 0xB1, 0xC0,  0}
};